  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2025-11-30 18:37:24.637419', '2025-11-30 18:37:24.637422') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePatients (20251130000001)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "patients" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_patients_on_name" ON "patients" ("name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251130000001') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
Migrating to CreatePrescriptions (20251130000002)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "prescriptions" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "patient_id" integer NOT NULL, "drug_name" varchar NOT NULL, "created" boolean DEFAULT FALSE NOT NULL, "fill_count" integer DEFAULT 0 NOT NULL, "return_count" integer DEFAULT 0 NOT NULL, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL, CONSTRAINT "fk_rails_bede94f0a0"
FOREIGN KEY ("patient_id")
  REFERENCES "patients" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE INDEX "index_prescriptions_on_patient_id" ON "prescriptions" ("patient_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_prescriptions_on_patient_id_and_drug_name" ON "prescriptions" ("patient_id", "drug_name")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20251130000002') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["created_at", "2025-11-30 18:41:40.299420"], ["updated_at", "2025-11-30 18:41:40.299420"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (11.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "A"], ["patient_id", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 1], ["drug_name", "A"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 18:41:40.329874"], ["updated_at", "2025-11-30 18:41:40.329874"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.0ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 18:41:40.333199"], ["id", 1]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 1]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/services/prescription_event_processor.rb:81:in 'PrescriptionEventProcessor#generate_report'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/models/patient.rb:32:in 'Patient#total_fills'
Started GET "/" for 127.0.0.1 at 2025-11-30 13:57:30 -0500
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (1.5ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 31.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 88.7ms | GC: 19.0ms)
Completed 500 Internal Server Error in 239ms (ActiveRecord: 4.2ms (3 queries, 0 cached) | GC: 19.0ms)


  
ActionView::Template::Error (link_tree argument must be a directory)
Caused by: Sprockets::ArgumentError (link_tree argument must be a directory)

Information for: ActionView::Template::Error (link_tree argument must be a directory):
  
sprockets (4.2.2) lib/sprockets/directive_processor.rb:407:in 'Sprockets::DirectiveProcessor#expand_relative_dirname'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:359:in 'Sprockets::DirectiveProcessor#process_link_tree_directive'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:189:in 'block in Sprockets::DirectiveProcessor#process_directives'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:187:in 'Array#each'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:187:in 'Sprockets::DirectiveProcessor#process_directives'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:84:in 'Sprockets::DirectiveProcessor#_call'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:65:in 'Sprockets::DirectiveProcessor#call'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:84:in 'Sprockets::ProcessorUtils#call_processor'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:66:in 'block in Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Array#reverse_each'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/loader.rb:184:in 'Sprockets::Loader#load_from_unloaded'
sprockets (4.2.2) lib/sprockets/loader.rb:59:in 'block in Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/loader.rb:339:in 'Sprockets::Loader#fetch_asset_from_dependency_cache'
sprockets (4.2.2) lib/sprockets/loader.rb:43:in 'Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'block in Sprockets::CachedEnvironment#load'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:207:in 'block in Concurrent::Map#fetch_or_store'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:187:in 'Concurrent::Map#fetch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:206:in 'Concurrent::Map#fetch_or_store'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'Sprockets::CachedEnvironment#load'
sprockets (4.2.2) lib/sprockets/bundle.rb:27:in 'Sprockets::Bundle.call'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:84:in 'Sprockets::ProcessorUtils#call_processor'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:66:in 'block in Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Array#reverse_each'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/loader.rb:184:in 'Sprockets::Loader#load_from_unloaded'
sprockets (4.2.2) lib/sprockets/loader.rb:59:in 'block in Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/loader.rb:339:in 'Sprockets::Loader#fetch_asset_from_dependency_cache'
sprockets (4.2.2) lib/sprockets/loader.rb:43:in 'Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'block in Sprockets::CachedEnvironment#load'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:207:in 'block in Concurrent::Map#fetch_or_store'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:187:in 'Concurrent::Map#fetch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:206:in 'Concurrent::Map#fetch_or_store'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'Sprockets::CachedEnvironment#load'
sprockets (4.2.2) lib/sprockets/base.rb:81:in 'Sprockets::Base#find_asset'
sprockets (4.2.2) lib/sprockets/base.rb:88:in 'Sprockets::Base#find_all_linked_assets'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'Enumerator#each'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'Enumerable#to_a'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'block (2 levels) in Sprockets::Manifest#find'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:24:in 'block in Concurrent::SafeTaskExecutor#execute'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'block in Concurrent::Synchronization::MutexLockableObject#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'Thread::Mutex#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'Concurrent::Synchronization::MutexLockableObject#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:22:in 'Concurrent::SafeTaskExecutor#execute'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/promise.rb:564:in 'block in Concurrent::Promise#realize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:359:in 'Concurrent::RubyThreadPoolExecutor::Worker#run_task'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:350:in 'block (3 levels) in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
<internal:kernel>:168:in 'Kernel#loop'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:341:in 'block (2 levels) in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in 'Kernel#catch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in 'block in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'

Information for cause: Sprockets::ArgumentError (link_tree argument must be a directory):
  
sprockets (4.2.2) lib/sprockets/directive_processor.rb:407:in 'Sprockets::DirectiveProcessor#expand_relative_dirname'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:359:in 'Sprockets::DirectiveProcessor#process_link_tree_directive'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:189:in 'block in Sprockets::DirectiveProcessor#process_directives'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:187:in 'Array#each'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:187:in 'Sprockets::DirectiveProcessor#process_directives'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:84:in 'Sprockets::DirectiveProcessor#_call'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:65:in 'Sprockets::DirectiveProcessor#call'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:84:in 'Sprockets::ProcessorUtils#call_processor'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:66:in 'block in Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Array#reverse_each'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/loader.rb:184:in 'Sprockets::Loader#load_from_unloaded'
sprockets (4.2.2) lib/sprockets/loader.rb:59:in 'block in Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/loader.rb:339:in 'Sprockets::Loader#fetch_asset_from_dependency_cache'
sprockets (4.2.2) lib/sprockets/loader.rb:43:in 'Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'block in Sprockets::CachedEnvironment#load'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:207:in 'block in Concurrent::Map#fetch_or_store'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:187:in 'Concurrent::Map#fetch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:206:in 'Concurrent::Map#fetch_or_store'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'Sprockets::CachedEnvironment#load'
sprockets (4.2.2) lib/sprockets/bundle.rb:27:in 'Sprockets::Bundle.call'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:84:in 'Sprockets::ProcessorUtils#call_processor'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:66:in 'block in Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Array#reverse_each'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/loader.rb:184:in 'Sprockets::Loader#load_from_unloaded'
sprockets (4.2.2) lib/sprockets/loader.rb:59:in 'block in Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/loader.rb:339:in 'Sprockets::Loader#fetch_asset_from_dependency_cache'
sprockets (4.2.2) lib/sprockets/loader.rb:43:in 'Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'block in Sprockets::CachedEnvironment#load'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:207:in 'block in Concurrent::Map#fetch_or_store'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:187:in 'Concurrent::Map#fetch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:206:in 'Concurrent::Map#fetch_or_store'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'Sprockets::CachedEnvironment#load'
sprockets (4.2.2) lib/sprockets/base.rb:81:in 'Sprockets::Base#find_asset'
sprockets (4.2.2) lib/sprockets/base.rb:88:in 'Sprockets::Base#find_all_linked_assets'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'Enumerator#each'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'Enumerable#to_a'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'block (2 levels) in Sprockets::Manifest#find'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:24:in 'block in Concurrent::SafeTaskExecutor#execute'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'block in Concurrent::Synchronization::MutexLockableObject#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'Thread::Mutex#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'Concurrent::Synchronization::MutexLockableObject#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:22:in 'Concurrent::SafeTaskExecutor#execute'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/promise.rb:564:in 'block in Concurrent::Promise#realize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:359:in 'Concurrent::RubyThreadPoolExecutor::Worker#run_task'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:350:in 'block (3 levels) in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
<internal:kernel>:168:in 'Kernel#loop'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:341:in 'block (2 levels) in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in 'Kernel#catch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in 'block in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
Started GET "/" for 127.0.0.1 at 2025-11-30 13:57:39 -0500
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 1.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.5ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.5ms)


  
ActionView::Template::Error (link_tree argument must be a directory)
Caused by: Sprockets::ArgumentError (link_tree argument must be a directory)

Information for: ActionView::Template::Error (link_tree argument must be a directory):
  
sprockets (4.2.2) lib/sprockets/directive_processor.rb:407:in 'Sprockets::DirectiveProcessor#expand_relative_dirname'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:359:in 'Sprockets::DirectiveProcessor#process_link_tree_directive'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:189:in 'block in Sprockets::DirectiveProcessor#process_directives'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:187:in 'Array#each'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:187:in 'Sprockets::DirectiveProcessor#process_directives'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:84:in 'Sprockets::DirectiveProcessor#_call'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:65:in 'Sprockets::DirectiveProcessor#call'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:84:in 'Sprockets::ProcessorUtils#call_processor'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:66:in 'block in Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Array#reverse_each'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/loader.rb:184:in 'Sprockets::Loader#load_from_unloaded'
sprockets (4.2.2) lib/sprockets/loader.rb:59:in 'block in Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/loader.rb:339:in 'Sprockets::Loader#fetch_asset_from_dependency_cache'
sprockets (4.2.2) lib/sprockets/loader.rb:43:in 'Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'block in Sprockets::CachedEnvironment#load'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:207:in 'block in Concurrent::Map#fetch_or_store'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:187:in 'Concurrent::Map#fetch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:206:in 'Concurrent::Map#fetch_or_store'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'Sprockets::CachedEnvironment#load'
sprockets (4.2.2) lib/sprockets/bundle.rb:27:in 'Sprockets::Bundle.call'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:84:in 'Sprockets::ProcessorUtils#call_processor'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:66:in 'block in Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Array#reverse_each'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/loader.rb:184:in 'Sprockets::Loader#load_from_unloaded'
sprockets (4.2.2) lib/sprockets/loader.rb:59:in 'block in Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/loader.rb:339:in 'Sprockets::Loader#fetch_asset_from_dependency_cache'
sprockets (4.2.2) lib/sprockets/loader.rb:43:in 'Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'block in Sprockets::CachedEnvironment#load'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:207:in 'block in Concurrent::Map#fetch_or_store'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:187:in 'Concurrent::Map#fetch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:206:in 'Concurrent::Map#fetch_or_store'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'Sprockets::CachedEnvironment#load'
sprockets (4.2.2) lib/sprockets/base.rb:81:in 'Sprockets::Base#find_asset'
sprockets (4.2.2) lib/sprockets/base.rb:88:in 'Sprockets::Base#find_all_linked_assets'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'Enumerator#each'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'Enumerable#to_a'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'block (2 levels) in Sprockets::Manifest#find'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:24:in 'block in Concurrent::SafeTaskExecutor#execute'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'block in Concurrent::Synchronization::MutexLockableObject#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'Thread::Mutex#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'Concurrent::Synchronization::MutexLockableObject#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:22:in 'Concurrent::SafeTaskExecutor#execute'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/promise.rb:564:in 'block in Concurrent::Promise#realize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:359:in 'Concurrent::RubyThreadPoolExecutor::Worker#run_task'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:350:in 'block (3 levels) in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
<internal:kernel>:168:in 'Kernel#loop'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:341:in 'block (2 levels) in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in 'Kernel#catch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in 'block in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'

Information for cause: Sprockets::ArgumentError (link_tree argument must be a directory):
  
sprockets (4.2.2) lib/sprockets/directive_processor.rb:407:in 'Sprockets::DirectiveProcessor#expand_relative_dirname'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:359:in 'Sprockets::DirectiveProcessor#process_link_tree_directive'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:189:in 'block in Sprockets::DirectiveProcessor#process_directives'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:187:in 'Array#each'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:187:in 'Sprockets::DirectiveProcessor#process_directives'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:84:in 'Sprockets::DirectiveProcessor#_call'
sprockets (4.2.2) lib/sprockets/directive_processor.rb:65:in 'Sprockets::DirectiveProcessor#call'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:84:in 'Sprockets::ProcessorUtils#call_processor'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:66:in 'block in Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Array#reverse_each'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/loader.rb:184:in 'Sprockets::Loader#load_from_unloaded'
sprockets (4.2.2) lib/sprockets/loader.rb:59:in 'block in Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/loader.rb:339:in 'Sprockets::Loader#fetch_asset_from_dependency_cache'
sprockets (4.2.2) lib/sprockets/loader.rb:43:in 'Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'block in Sprockets::CachedEnvironment#load'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:207:in 'block in Concurrent::Map#fetch_or_store'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:187:in 'Concurrent::Map#fetch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:206:in 'Concurrent::Map#fetch_or_store'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'Sprockets::CachedEnvironment#load'
sprockets (4.2.2) lib/sprockets/bundle.rb:27:in 'Sprockets::Bundle.call'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:84:in 'Sprockets::ProcessorUtils#call_processor'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:66:in 'block in Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Array#reverse_each'
sprockets (4.2.2) lib/sprockets/processor_utils.rb:65:in 'Sprockets::ProcessorUtils#call_processors'
sprockets (4.2.2) lib/sprockets/loader.rb:184:in 'Sprockets::Loader#load_from_unloaded'
sprockets (4.2.2) lib/sprockets/loader.rb:59:in 'block in Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/loader.rb:339:in 'Sprockets::Loader#fetch_asset_from_dependency_cache'
sprockets (4.2.2) lib/sprockets/loader.rb:43:in 'Sprockets::Loader#load'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'block in Sprockets::CachedEnvironment#load'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:207:in 'block in Concurrent::Map#fetch_or_store'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:187:in 'Concurrent::Map#fetch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/map.rb:206:in 'Concurrent::Map#fetch_or_store'
sprockets (4.2.2) lib/sprockets/cached_environment.rb:44:in 'Sprockets::CachedEnvironment#load'
sprockets (4.2.2) lib/sprockets/base.rb:81:in 'Sprockets::Base#find_asset'
sprockets (4.2.2) lib/sprockets/base.rb:88:in 'Sprockets::Base#find_all_linked_assets'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'Enumerator#each'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'Enumerable#to_a'
sprockets (4.2.2) lib/sprockets/manifest.rb:125:in 'block (2 levels) in Sprockets::Manifest#find'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:24:in 'block in Concurrent::SafeTaskExecutor#execute'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'block in Concurrent::Synchronization::MutexLockableObject#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'Thread::Mutex#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/synchronization/mutex_lockable_object.rb:48:in 'Concurrent::Synchronization::MutexLockableObject#synchronize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/safe_task_executor.rb:22:in 'Concurrent::SafeTaskExecutor#execute'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/promise.rb:564:in 'block in Concurrent::Promise#realize'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:359:in 'Concurrent::RubyThreadPoolExecutor::Worker#run_task'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:350:in 'block (3 levels) in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
<internal:kernel>:168:in 'Kernel#loop'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:341:in 'block (2 levels) in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in 'Kernel#catch'
concurrent-ruby (1.3.5) lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:340:in 'block in Concurrent::RubyThreadPoolExecutor::Worker#create_worker'
Started GET "/" for 127.0.0.1 at 2025-11-30 13:58:19 -0500
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 2.8ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | GC: 1.4ms)
Completed 200 OK in 30ms (Views: 20.3ms | ActiveRecord: 0.6ms (3 queries, 0 cached) | GC: 2.0ms)


Started POST "/api/v1/prescription_events" for 127.0.0.1 at 2025-11-30 13:58:27 -0500
Processing by Api::V1::PrescriptionEventsController#create as */*
  Parameters: {"event" => "CREATED", "patient" => "Test Patient", "drug" => "Test Drug", "prescription_event" => {"event" => "CREATED", "patient" => "Test Patient", "drug" => "Test Drug"}}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/prescription_events" for 127.0.0.1 at 2025-11-30 13:58:32 -0500
Processing by Api::V1::PrescriptionEventsController#create as */*
  Parameters: {"patient_name" => "Test Patient", "drug_name" => "Test Drug", "event_name" => "CREATED", "prescription_event" => {"patient_name" => "Test Patient", "drug_name" => "Test Drug", "event_name" => "CREATED"}}
  [1m[36mPatient Load (2.8ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Test Patient"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Test Patient"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.3ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Test Patient"], ["created_at", "2025-11-30 18:58:32.692874"], ["updated_at", "2025-11-30 18:58:32.692874"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (8.7ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 2], ["drug_name", "Test Drug"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "Test Drug"], ["patient_id", 2], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 2], ["drug_name", "Test Drug"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 18:58:32.707799"], ["updated_at", "2025-11-30 18:58:32.707799"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
Completed 201 Created in 25ms (Views: 0.1ms | ActiveRecord: 14.4ms (6 queries, 0 cached) | GC: 0.0ms)


Started POST "/api/v1/prescription_events/batch" for 127.0.0.1 at 2025-11-30 13:58:38 -0500
Processing by Api::V1::PrescriptionEventsController#batch as */*
  Parameters: {"events" => [{"patient_name" => "John", "drug_name" => "Aspirin", "event_name" => "CREATED"}, {"patient_name" => "John", "drug_name" => "Aspirin", "event_name" => "FILL"}, {"patient_name" => "Jane", "drug_name" => "Ibuprofen", "event_name" => "CREATED"}], "prescription_event" => {"events" => [{"patient_name" => "John", "drug_name" => "Aspirin", "event_name" => "CREATED"}, {"patient_name" => "John", "drug_name" => "Aspirin", "event_name" => "FILL"}, {"patient_name" => "Jane", "drug_name" => "Ibuprofen", "event_name" => "CREATED"}]}}
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "Aspirin"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "Aspirin"], ["patient_id", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 1], ["drug_name", "Aspirin"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 18:58:38.832206"], ["updated_at", "2025-11-30 18:58:38.832206"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "Aspirin"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Jane"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (11.0ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Jane"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Jane"], ["created_at", "2025-11-30 18:58:38.849440"], ["updated_at", "2025-11-30 18:58:38.849440"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 3], ["drug_name", "Ibuprofen"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "Ibuprofen"], ["patient_id", 3], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 3], ["drug_name", "Ibuprofen"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 18:58:38.854780"], ["updated_at", "2025-11-30 18:58:38.854780"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
Completed 200 OK in 40ms (Views: 0.1ms | ActiveRecord: 14.9ms (12 queries, 0 cached) | GC: 0.0ms)


  [1m[36mPatient Load (1.5ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/models/patient.rb:32:in 'Patient#total_fills'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 2]]
  â†³ app/models/patient.rb:32:in 'Patient#total_fills'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 3]]
  â†³ app/models/patient.rb:32:in 'Patient#total_fills'
Started GET "/" for 127.0.0.1 at 2025-11-30 13:59:10 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 6.9ms | ActiveRecord: 0.6ms (5 queries, 0 cached) | GC: 0.0ms)


Started GET "/assets/application-69729d0fa04f1ce34dd912e7f26eecc4cece43735ecd08662bbbfc40bd6eaacd.css" for 127.0.0.1 at 2025-11-30 13:59:10 -0500
Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-30 13:59:10 -0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started POST "/prescriptions/upload" for 127.0.0.1 at 2025-11-30 14:00:06 -0500
Processing by PrescriptionsController#upload as HTML
  Parameters: {"authenticity_token" => "J3QwQuIXvPF0cU3a2vqOV9BNZWT_QhHmq1ph3_ECyQqKLVOXQM14FW6hdY0FORAO5n49LS05BBAhXkwCFGZa5g", "file" => #<ActionDispatch::Http::UploadedFile:0x00007f034c05abf8 @tempfile=#<Tempfile:/tmp/RackMultipart20251130-80523-f5ibt3.csv>, @content_type="text/csv", @original_filename="sample_upload.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sample_upload.csv\"\r\nContent-Type: text/csv\r\n">, "commit" => "Process Prescription Events"}
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
LoadError (cannot load such file -- csv):
  
app/services/file_parser_service.rb:3:in '<top (required)>'
app/controllers/prescriptions_controller.rb:25:in 'PrescriptionsController#upload'
Started GET "/" for 127.0.0.1 at 2025-11-30 14:01:50 -0500
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 2.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 47ms (Views: 4.9ms | ActiveRecord: 2.1ms (5 queries, 0 cached) | GC: 25.3ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:02:04 -0500
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | GC: 0.0ms)
Completed 200 OK in 19ms (Views: 3.5ms | ActiveRecord: 0.5ms (5 queries, 0 cached) | GC: 1.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:02:58 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (0.7ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 12.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 43.3ms | GC: 14.8ms)
Completed 200 OK in 105ms (Views: 48.5ms | ActiveRecord: 2.3ms (5 queries, 0 cached) | GC: 14.8ms)


Started POST "/prescriptions/upload" for 127.0.0.1 at 2025-11-30 14:03:01 -0500
Processing by PrescriptionsController#upload as */*
  Parameters: {"file" => #<ActionDispatch::Http::UploadedFile:0x000072b48620db10 @tempfile=#<Tempfile:/tmp/RackMultipart20251130-83840-50anf8.csv>, @content_type="application/octet-stream", @original_filename="sample_upload.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sample_upload.csv\"\r\nContent-Type: application/octet-stream\r\n">}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Content in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (8.1.1) lib/action_controller/metal/request_forgery_protection.rb:321:in 'ActionController::RequestForgeryProtection::ProtectionMethods::Exception#handle_unverified_request'
actionpack (8.1.1) lib/action_controller/metal/request_forgery_protection.rb:415:in 'ActionController::RequestForgeryProtection#handle_unverified_request'
actionpack (8.1.1) lib/action_controller/metal/request_forgery_protection.rb:404:in 'ActionController::RequestForgeryProtection#verify_authenticity_token'
activesupport (8.1.1) lib/active_support/callbacks.rb:362:in 'block in ActiveSupport::Callbacks::CallTemplate::MethodCall#make_lambda'
activesupport (8.1.1) lib/active_support/callbacks.rb:179:in 'block in ActiveSupport::Callbacks::Filters::Before#call'
actionpack (8.1.1) lib/abstract_controller/callbacks.rb:36:in 'block (2 levels) in <module:Callbacks>'
activesupport (8.1.1) lib/active_support/callbacks.rb:180:in 'ActiveSupport::Callbacks::Filters::Before#call'
activesupport (8.1.1) lib/active_support/callbacks.rb:560:in 'block in ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (8.1.1) lib/active_support/callbacks.rb:560:in 'Array#each'
activesupport (8.1.1) lib/active_support/callbacks.rb:560:in 'ActiveSupport::Callbacks::CallbackSequence#invoke_before'
activesupport (8.1.1) lib/active_support/callbacks.rb:109:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.1.1) lib/abstract_controller/callbacks.rb:266:in 'AbstractController::Callbacks#process_action'
actionpack (8.1.1) lib/action_controller/metal/rescue.rb:36:in 'ActionController::Rescue#process_action'
actionpack (8.1.1) lib/action_controller/metal/instrumentation.rb:76:in 'block in ActionController::Instrumentation#process_action'
activesupport (8.1.1) lib/active_support/notifications.rb:210:in 'block in ActiveSupport::Notifications.instrument'
activesupport (8.1.1) lib/active_support/notifications/instrumenter.rb:58:in 'ActiveSupport::Notifications::Instrumenter#instrument'
activesupport (8.1.1) lib/active_support/notifications.rb:210:in 'ActiveSupport::Notifications.instrument'
actionpack (8.1.1) lib/action_controller/metal/instrumentation.rb:75:in 'ActionController::Instrumentation#process_action'
actionpack (8.1.1) lib/action_controller/metal/params_wrapper.rb:259:in 'ActionController::ParamsWrapper#process_action'
activerecord (8.1.1) lib/active_record/railties/controller_runtime.rb:39:in 'ActiveRecord::Railties::ControllerRuntime#process_action'
actionpack (8.1.1) lib/abstract_controller/base.rb:154:in 'AbstractController::Base#process'
actionview (8.1.1) lib/action_view/rendering.rb:40:in 'ActionView::Rendering#process'
actionpack (8.1.1) lib/action_controller/metal.rb:252:in 'ActionController::Metal#dispatch'
actionpack (8.1.1) lib/action_controller/metal.rb:335:in 'ActionController::Metal.dispatch'
actionpack (8.1.1) lib/action_dispatch/routing/route_set.rb:65:in 'ActionDispatch::Routing::RouteSet::Dispatcher#dispatch'
actionpack (8.1.1) lib/action_dispatch/routing/route_set.rb:50:in 'ActionDispatch::Routing::RouteSet::Dispatcher#serve'
actionpack (8.1.1) lib/action_dispatch/journey/router.rb:35:in 'block in ActionDispatch::Journey::Router#serve'
actionpack (8.1.1) lib/action_dispatch/journey/router.rb:86:in 'block in ActionDispatch::Journey::Router#recognize'
actionpack (8.1.1) lib/action_dispatch/journey/router.rb:66:in 'Array#each'
actionpack (8.1.1) lib/action_dispatch/journey/router.rb:66:in 'ActionDispatch::Journey::Router#recognize'
actionpack (8.1.1) lib/action_dispatch/journey/router.rb:31:in 'ActionDispatch::Journey::Router#serve'
actionpack (8.1.1) lib/action_dispatch/routing/route_set.rb:906:in 'ActionDispatch::Routing::RouteSet#call'
railties (8.1.1) lib/rails/engine/lazy_route_set.rb:60:in 'Rails::Engine::LazyRouteSet#call'
rack (3.2.4) lib/rack/tempfile_reaper.rb:20:in 'Rack::TempfileReaper#call'
rack (3.2.4) lib/rack/etag.rb:29:in 'Rack::ETag#call'
rack (3.2.4) lib/rack/conditional_get.rb:44:in 'Rack::ConditionalGet#call'
rack (3.2.4) lib/rack/head.rb:15:in 'Rack::Head#call'
actionpack (8.1.1) lib/action_dispatch/http/content_security_policy.rb:38:in 'ActionDispatch::ContentSecurityPolicy::Middleware#call'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in 'Rack::Session::Abstract::Persisted#context'
rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in 'Rack::Session::Abstract::Persisted#call'
actionpack (8.1.1) lib/action_dispatch/middleware/cookies.rb:708:in 'ActionDispatch::Cookies#call'
activerecord (8.1.1) lib/active_record/migration.rb:671:in 'ActiveRecord::Migration::CheckPending#call'
actionpack (8.1.1) lib/action_dispatch/middleware/callbacks.rb:31:in 'block in ActionDispatch::Callbacks#call'
activesupport (8.1.1) lib/active_support/callbacks.rb:101:in 'ActiveSupport::Callbacks#run_callbacks'
actionpack (8.1.1) lib/action_dispatch/middleware/callbacks.rb:30:in 'ActionDispatch::Callbacks#call'
actionpack (8.1.1) lib/action_dispatch/middleware/executor.rb:20:in 'ActionDispatch::Executor#call'
actionpack (8.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.1.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.1.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.1.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.1.1) lib/action_dispatch/middleware/remote_ip.rb:98:in 'ActionDispatch::RemoteIp#call'
actionpack (8.1.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.4) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.4) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.1.1) lib/action_dispatch/middleware/executor.rb:20:in 'ActionDispatch::Executor#call'
actionpack (8.1.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.4) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.1.1) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.1.1) lib/rails/engine.rb:534:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'
Started GET "/" for 127.0.0.1 at 2025-11-30 14:03:16 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.4ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 7.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 11.6ms | ActiveRecord: 1.0ms (5 queries, 0 cached) | GC: 0.8ms)


Started POST "/prescriptions/upload" for 127.0.0.1 at 2025-11-30 14:03:27 -0500
Processing by PrescriptionsController#upload as HTML
  Parameters: {"authenticity_token" => "EH3C1PLS78rAF0oFpU6hQRkkMSmEr2ZA2iIlne0BVp69JKEBUAgrLtrHclJ6jT8YLxdpYFbUc7ZQJghACGXFcg", "file" => #<ActionDispatch::Http::UploadedFile:0x000072b48610ac40 @tempfile=#<Tempfile:/tmp/RackMultipart20251130-83840-9mz1n7.csv>, @content_type="text/csv", @original_filename="sample_upload.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sample_upload.csv\"\r\nContent-Type: text/csv\r\n">, "commit" => "Process Prescription Events"}
  [1m[36mPatient Load (0.3ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mCACHE Patient Load (0.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mCACHE Prescription Load (0.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (5.3ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 1]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.4ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Mark"], ["created_at", "2025-11-30 19:03:27.688705"], ["updated_at", "2025-11-30 19:03:27.688705"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "B"], ["patient_id", 4], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 4], ["drug_name", "B"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:03:27.696048"], ["updated_at", "2025-11-30 19:03:27.696048"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.8ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 19:03:27.697897"], ["id", 5]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "C"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "C"], ["patient_id", 4], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.3ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 4], ["drug_name", "C"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:03:27.707535"], ["updated_at", "2025-11-30 19:03:27.707535"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "E"], ["patient_id", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 1], ["drug_name", "E"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:03:27.723395"], ["updated_at", "2025-11-30 19:03:27.723395"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (1.7ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 19:03:27.726604"], ["id", 7]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.3ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Paul"], ["created_at", "2025-11-30 19:03:27.742110"], ["updated_at", "2025-11-30 19:03:27.742110"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 5], ["drug_name", "D"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "D"], ["patient_id", 5], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.3ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 5], ["drug_name", "D"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:03:27.752582"], ["updated_at", "2025-11-30 19:03:27.752582"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 7]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 1], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 7]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.3ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Nick"], ["created_at", "2025-11-30 19:03:27.761992"], ["updated_at", "2025-11-30 19:03:27.761992"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 6], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "A"], ["patient_id", 6], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.4ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 6], ["drug_name", "A"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:03:27.771032"], ["updated_at", "2025-11-30 19:03:27.771032"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (1.6ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 19:03:27.774160"], ["id", 9]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
Redirected to http://localhost:3000/
Completed 302 Found in 243ms (ActiveRecord: 30.2ms (52 queries, 0 cached) | GC: 1.2ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:03:27 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6]]
  â†³ app/controllers/prescriptions_controller.rb:6:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 13ms (Views: 2.5ms | ActiveRecord: 0.9ms (8 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:06:14 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (0.8ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 1], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 33.8ms | GC: 17.0ms)
  Rendered layout layouts/application.html.erb (Duration: 48.7ms | GC: 17.9ms)
Completed 200 OK in 129ms (Views: 51.7ms | ActiveRecord: 3.9ms (11 queries, 0 cached) | GC: 17.9ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:08:31 -0500
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 1], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 7.1ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 10.1ms | GC: 1.4ms)
Completed 200 OK in 29ms (Views: 10.5ms | ActiveRecord: 1.2ms (11 queries, 0 cached) | GC: 1.6ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:09:16 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 1], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:103
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 12.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.5ms | GC: 0.0ms)
Completed 200 OK in 34ms (Views: 14.9ms | ActiveRecord: 2.1ms (11 queries, 0 cached) | GC: 0.0ms)


Started GET "/assets/application-eb3a3620ef89a03e0199dc53be0612d9a892d0e88a7726db23470473d8bc1110.css" for 127.0.0.1 at 2025-11-30 14:09:16 -0500
Started GET "/api/v1/prescription_events" for 127.0.0.1 at 2025-11-30 14:09:39 -0500
  
ActionController::RoutingError (No route matches [GET] "/api/v1/prescription_events"):
  
Started GET "/api/v1/prescription_events" for 127.0.0.1 at 2025-11-30 14:11:52 -0500
  
ActionController::RoutingError (No route matches [GET] "/api/v1/prescription_events"):
  
Started GET "/" for 127.0.0.1 at 2025-11-30 14:11:58 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (1.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?)[0m  [["patient_id", 1], ["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 1], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 1], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 7.0ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | GC: 0.3ms)
Completed 200 OK in 34ms (Views: 12.0ms | ActiveRecord: 2.8ms (11 queries, 0 cached) | GC: 0.8ms)


Started GET "/patients" for 127.0.0.1 at 2025-11-30 14:12:12 -0500
Processing by PatientsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering patients/index.html.erb within layouts/application
  [1m[36mPatient Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/views/patients/index.html.erb:12
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" ORDER BY "patients"."name" ASC[0m
  â†³ app/views/patients/index.html.erb:35
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?)[0m  [["patient_id", 3], ["patient_id", 1], ["patient_id", 4], ["patient_id", 6], ["patient_id", 5], ["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:35
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 3]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 4]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 6]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 5]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPatient Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "patients"[0m
  â†³ app/views/patients/index.html.erb:68
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 3]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 4]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 6]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 5]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:72
  Rendered patients/index.html.erb within layouts/application (Duration: 41.9ms | GC: 12.6ms)
  Rendered layout layouts/application.html.erb (Duration: 44.8ms | GC: 13.9ms)
Completed 200 OK in 46ms (Views: 43.8ms | ActiveRecord: 1.5ms (16 queries, 0 cached) | GC: 13.9ms)


Started DELETE "/patients/1/clear_prescriptions" for 127.0.0.1 at 2025-11-30 14:12:46 -0500
Processing by PatientsController#clear_prescriptions as HTML
  Parameters: {"authenticity_token" => "9xfNjuTmApxETqilEoCx22jtMq0v_rWuYFcXdud3-i21eLzHagkicuIx4NykmQ2fFFLWi2fBr6Sx86Hli-li9g", "id" => "1"}
  [1m[36mPatient Load (0.3ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/patients_controller.rb:23:in 'PatientsController#set_patient'
  [1m[36mPrescription Load (0.6ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/controllers/patients_controller.rb:16:in 'PatientsController#clear_prescriptions'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:16:in 'PatientsController#clear_prescriptions'
  [1m[36mPrescription Destroy (2.4ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 1]]
  â†³ app/controllers/patients_controller.rb:16:in 'PatientsController#clear_prescriptions'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 3]]
  â†³ app/controllers/patients_controller.rb:16:in 'PatientsController#clear_prescriptions'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 7]]
  â†³ app/controllers/patients_controller.rb:16:in 'PatientsController#clear_prescriptions'
  [1m[36mTRANSACTION (4.4ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:16:in 'PatientsController#clear_prescriptions'
Redirected to http://localhost:3000/patients
Completed 302 Found in 31ms (ActiveRecord: 7.9ms (5 queries, 0 cached) | GC: 10.3ms)


Started GET "/patients" for 127.0.0.1 at 2025-11-30 14:12:46 -0500
Processing by PatientsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering patients/index.html.erb within layouts/application
  [1m[36mPatient Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/views/patients/index.html.erb:12
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" ORDER BY "patients"."name" ASC[0m
  â†³ app/views/patients/index.html.erb:35
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?)[0m  [["patient_id", 3], ["patient_id", 1], ["patient_id", 4], ["patient_id", 6], ["patient_id", 5], ["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:35
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 3]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 4]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 6]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 5]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPatient Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "patients"[0m
  â†³ app/views/patients/index.html.erb:68
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 3]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 4]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 6]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 5]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:72
  Rendered patients/index.html.erb within layouts/application (Duration: 26.2ms | GC: 10.5ms)
  Rendered layout layouts/application.html.erb (Duration: 27.7ms | GC: 10.7ms)
Completed 200 OK in 29ms (Views: 27.1ms | ActiveRecord: 1.0ms (16 queries, 0 cached) | GC: 11.0ms)


Started DELETE "/patients/1" for 127.0.0.1 at 2025-11-30 14:12:57 -0500
Processing by PatientsController#destroy as HTML
  Parameters: {"authenticity_token" => "7Hiz1aDGPMXcYQ2XvuZv9QVAVmHqV-KlqIYYH93D72Ghf2NgrbOrCjq4T-v0lCVl7jUBSuI_RIJO8pqvQowmyA", "id" => "1"}
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/patients_controller.rb:23:in 'PatientsController#set_patient'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:11:in 'PatientsController#destroy'
  [1m[36mPrescription Load (1.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 1]]
  â†³ app/controllers/patients_controller.rb:11:in 'PatientsController#destroy'
  [1m[36mPatient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 1]]
  â†³ app/controllers/patients_controller.rb:11:in 'PatientsController#destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:11:in 'PatientsController#destroy'
Redirected to http://localhost:3000/patients
Completed 302 Found in 11ms (ActiveRecord: 1.8ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/patients" for 127.0.0.1 at 2025-11-30 14:12:57 -0500
Processing by PatientsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering patients/index.html.erb within layouts/application
  [1m[36mPatient Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/views/patients/index.html.erb:12
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" ORDER BY "patients"."name" ASC[0m
  â†³ app/views/patients/index.html.erb:35
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?)[0m  [["patient_id", 3], ["patient_id", 4], ["patient_id", 6], ["patient_id", 5], ["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:35
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 3]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 4]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 6]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 5]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPrescription Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:39
  [1m[36mPatient Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "patients"[0m
  â†³ app/views/patients/index.html.erb:68
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 3]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 4]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 6]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 5]]
  â†³ app/views/patients/index.html.erb:72
  [1m[36mCACHE Prescription Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 2]]
  â†³ app/views/patients/index.html.erb:72
  Rendered patients/index.html.erb within layouts/application (Duration: 29.3ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 34.4ms | GC: 0.4ms)
Completed 200 OK in 37ms (Views: 34.9ms | ActiveRecord: 1.4ms (14 queries, 0 cached) | GC: 0.9ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:13:01 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 10.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.7ms | GC: 0.5ms)
Completed 200 OK in 30ms (Views: 13.6ms | ActiveRecord: 2.0ms (9 queries, 0 cached) | GC: 3.5ms)


Started POST "/prescriptions/upload" for 127.0.0.1 at 2025-11-30 14:13:34 -0500
Processing by PrescriptionsController#upload as HTML
  Parameters: {"authenticity_token" => "fNXwx48PSdN2NvGIbScbNnmX_Ap_JCCi-SSGic7HCcHRjJMSLdWNN2zmyd-y5IVvT6SkQ61fNVRzIKtUK6OaLQ", "file" => #<ActionDispatch::Http::UploadedFile:0x0000757bbbdecd60 @tempfile=#<Tempfile:/tmp/RackMultipart20251130-84564-t6iqvv.csv>, @content_type="text/csv", @original_filename="sample_upload.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sample_upload.csv\"\r\nContent-Type: text/csv\r\n">, "commit" => "Process Prescription Events"}
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["created_at", "2025-11-30 19:13:34.911357"], ["updated_at", "2025-11-30 19:13:34.911357"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "A"], ["patient_id", 7], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.5ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 7], ["drug_name", "A"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:13:34.918344"], ["updated_at", "2025-11-30 19:13:34.918344"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 19:13:34.926194"], ["id", 10]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 10]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mCACHE Patient Load (0.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mCACHE Prescription Load (0.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "C"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mCACHE Patient Load (0.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "E"], ["patient_id", 7], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 7], ["drug_name", "E"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:13:34.946740"], ["updated_at", "2025-11-30 19:13:34.946740"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.8ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 19:13:34.948695"], ["id", 11]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 5], ["drug_name", "D"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.4ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 11]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 11]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 6], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
Redirected to http://localhost:3000/
Completed 302 Found in 138ms (ActiveRecord: 10.1ms (41 queries, 0 cached) | GC: 11.6ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:13:34 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 9.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.8ms | GC: 0.6ms)
Completed 200 OK in 23ms (Views: 13.4ms | ActiveRecord: 1.2ms (11 queries, 0 cached) | GC: 1.8ms)


Started GET "/prescriptions/new" for 127.0.0.1 at 2025-11-30 14:13:47 -0500
Processing by PrescriptionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/new.html.erb within layouts/application
  Rendered prescriptions/new.html.erb within layouts/application (Duration: 12.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | GC: 0.0ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionView::Template::Error (undefined method 'name' for nil)
Caused by: NoMethodError (undefined method 'name' for nil)

Information for: ActionView::Template::Error (undefined method 'name' for nil):
    26:         <%= form.label :patient_name, class: 'form-label fw-bold' do %>
    27:           <i class="fas fa-user me-2"></i>Patient Name
    28:         <% end %>
    29:         <%= form.text_field :patient_name, class: 'form-control', placeholder: 'Enter patient name', required: true, list: 'patients-datalist' %>
    30:         <datalist id="patients-datalist">
    31:           <% @patients.each do |patient| %>
    32:             <option value="<%= patient.name %>">
  
app/models/prescription.rb:19:in 'Prescription#patient_name'
app/views/prescriptions/new.html.erb:29
app/views/prescriptions/new.html.erb:12

Information for cause: NoMethodError (undefined method 'name' for nil):
  
app/models/prescription.rb:19:in 'Prescription#patient_name'
app/views/prescriptions/new.html.erb:29
app/views/prescriptions/new.html.erb:12
Started GET "/prescriptions/new" for 127.0.0.1 at 2025-11-30 14:14:54 -0500
Processing by PrescriptionsController#new as */*
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/new.html.erb within layouts/application
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" ORDER BY "patients"."name" ASC[0m
  â†³ app/views/prescriptions/new.html.erb:31
  Rendered prescriptions/new.html.erb within layouts/application (Duration: 22.6ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 25.5ms | GC: 0.4ms)
Completed 200 OK in 44ms (Views: 26.3ms | ActiveRecord: 8.3ms (1 query, 0 cached) | GC: 0.7ms)


Started GET "/prescriptions/new" for 127.0.0.1 at 2025-11-30 14:15:17 -0500
Processing by PrescriptionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/new.html.erb within layouts/application
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" ORDER BY "patients"."name" ASC[0m
  â†³ app/views/prescriptions/new.html.erb:31
  Rendered prescriptions/new.html.erb within layouts/application (Duration: 3.2ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 4.9ms | GC: 0.4ms)
Completed 200 OK in 6ms (Views: 5.2ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.4ms)


Started POST "/prescriptions" for 127.0.0.1 at 2025-11-30 14:16:22 -0500
Processing by PrescriptionsController#create as HTML
  Parameters: {"authenticity_token" => "aoIt5MjkHkRVLjeN59JIYYwhLjRWiDebMpjJGVXyiC_zpWiDcoks8IvNhAC7ieNEtiozJJkmOkhXR8fAPQ1QzA", "prescription" => {"patient_name" => "Allen", "drug_name" => "Paxil", "created" => "1", "fill_count" => "0", "return_count" => "0"}, "commit" => "Create Prescription"}
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Allen"], ["LIMIT", 1]]
  â†³ app/controllers/prescriptions_controller.rb:23:in 'PrescriptionsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/prescriptions_controller.rb:23:in 'PrescriptionsController#create'
  [1m[36mPatient Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Allen"], ["LIMIT", 1]]
  â†³ app/controllers/prescriptions_controller.rb:23:in 'PrescriptionsController#create'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Allen"], ["created_at", "2025-11-30 19:16:22.407199"], ["updated_at", "2025-11-30 19:16:22.407199"]]
  â†³ app/controllers/prescriptions_controller.rb:23:in 'PrescriptionsController#create'
  [1m[36mTRANSACTION (13.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/prescriptions_controller.rb:23:in 'PrescriptionsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/prescriptions_controller.rb:31:in 'PrescriptionsController#create'
  [1m[36mPrescription Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "Paxil"], ["patient_id", 8], ["LIMIT", 1]]
  â†³ app/controllers/prescriptions_controller.rb:31:in 'PrescriptionsController#create'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 8], ["drug_name", "Paxil"], ["created", 1], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:16:22.431183"], ["updated_at", "2025-11-30 19:16:22.431183"]]
  â†³ app/controllers/prescriptions_controller.rb:31:in 'PrescriptionsController#create'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/prescriptions_controller.rb:31:in 'PrescriptionsController#create'
Redirected to http://localhost:3000/prescriptions
Completed 302 Found in 37ms (ActiveRecord: 16.8ms (5 queries, 0 cached) | GC: 0.9ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:16:22 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 17.8ms | GC: 0.4ms)
  Rendered layout layouts/application.html.erb (Duration: 19.3ms | GC: 0.4ms)
Completed 200 OK in 39ms (Views: 19.2ms | ActiveRecord: 2.2ms (13 queries, 0 cached) | GC: 1.0ms)


Started PATCH "/prescriptions/5/decrement_fill" for 127.0.0.1 at 2025-11-30 14:16:47 -0500
Processing by PrescriptionsController#decrement_fill as HTML
  Parameters: {"authenticity_token" => "7d1pQtMVNhhXpKfhD4Lj5kdwyQFZidq4wyTPk91MGNSGY6oNuMX24MTeG9BADtBktVHkfhLYn0iPB-b0S6BKLA", "id" => "5"}
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/prescriptions_controller.rb:143:in 'PrescriptionsController#set_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
Redirected to http://localhost:3000/prescriptions
Completed 302 Found in 4ms (ActiveRecord: 0.4ms (2 queries, 0 cached) | GC: 0.0ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:16:47 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.4ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 16.8ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | GC: 0.2ms)
Completed 200 OK in 37ms (Views: 19.2ms | ActiveRecord: 2.2ms (13 queries, 0 cached) | GC: 0.4ms)


Started GET "/prescriptions/5/edit" for 127.0.0.1 at 2025-11-30 14:18:18 -0500
Processing by PrescriptionsController#edit as HTML
  Parameters: {"id" => "5"}
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/prescriptions_controller.rb:143:in 'PrescriptionsController#set_prescription'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/edit.html.erb within layouts/application
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/prescriptions/edit.html.erb:29
  [1m[36mPatient Load (0.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients" ORDER BY "patients"."name" ASC[0m
  â†³ app/views/prescriptions/edit.html.erb:31
  Rendered prescriptions/edit.html.erb within layouts/application (Duration: 4.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.9ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 11.2ms | ActiveRecord: 0.3ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:18:25 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:115
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 12.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.5ms | GC: 0.0ms)
Completed 200 OK in 28ms (Views: 16.0ms | ActiveRecord: 1.5ms (13 queries, 0 cached) | GC: 0.0ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:20:05 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.6ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:75
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:75
  [1m[36mPrescription Load (0.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:75
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:75
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 11.8ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 13.7ms | GC: 0.8ms)
Completed 200 OK in 43ms (Views: 15.9ms | ActiveRecord: 2.1ms (13 queries, 0 cached) | GC: 6.0ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:21:00 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (1.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 18.4ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 22.0ms | GC: 0.5ms)
Completed 200 OK in 70ms (Views: 24.3ms | ActiveRecord: 4.3ms (13 queries, 0 cached) | GC: 3.1ms)


Started POST "/prescriptions/upload" for 127.0.0.1 at 2025-11-30 14:21:32 -0500
Processing by PrescriptionsController#upload as HTML
  Parameters: {"authenticity_token" => "Erc8CNNClqQDDwbksacKbx2Jz-ZaxOlmYE0IXpZ4wNa_7l_dcZhSQBnfPrNuZJQ2K7qXr4i__JDqSSWDcxxTOg", "file" => #<ActionDispatch::Http::UploadedFile:0x0000757bbbdedb70 @tempfile=#<Tempfile:/tmp/RackMultipart20251130-84564-t9zqms.csv>, @content_type="text/csv", @original_filename="sample_upload.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sample_upload.csv\"\r\nContent-Type: text/csv\r\n">, "commit" => "Process File"}
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mCACHE Patient Load (0.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mCACHE Prescription Load (0.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (5.6ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 10]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mCACHE Patient Load (0.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mCACHE Prescription Load (0.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "C"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mCACHE Patient Load (0.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.9ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.8ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 4], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 5]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 5], ["drug_name", "D"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 11]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 7], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 11]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 6], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
Redirected to http://localhost:3000/
Completed 302 Found in 83ms (ActiveRecord: 13.1ms (33 queries, 0 cached) | GC: 1.1ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:21:33 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 8.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.1ms | GC: 0.0ms)
Completed 200 OK in 26ms (Views: 13.8ms | ActiveRecord: 1.3ms (13 queries, 0 cached) | GC: 0.0ms)


Started GET "/prescriptions/new" for 127.0.0.1 at 2025-11-30 14:22:39 -0500
Processing by PrescriptionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/new.html.erb within layouts/application
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" ORDER BY "patients"."name" ASC[0m
  â†³ app/views/prescriptions/new.html.erb:31
  Rendered prescriptions/new.html.erb within layouts/application (Duration: 3.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 14ms (Views: 4.6ms | ActiveRecord: 0.2ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/prescriptions" for 127.0.0.1 at 2025-11-30 14:22:53 -0500
Processing by PrescriptionsController#create as HTML
  Parameters: {"authenticity_token" => "NpgxfkpfYTZSKMFZ87bzeuvfgXuByPuqyy77rrN4yRGvv3QZ8DJTgozLctSv7Vhf0dSca05m9nmu8fV324cR8g", "prescription" => {"patient_name" => "Allen", "drug_name" => "Prilosec", "created" => "0", "fill_count" => "0", "return_count" => "0"}, "commit" => "Create Prescription"}
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Allen"], ["LIMIT", 1]]
  â†³ app/controllers/prescriptions_controller.rb:23:in 'PrescriptionsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/prescriptions_controller.rb:31:in 'PrescriptionsController#create'
  [1m[36mPrescription Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "Prilosec"], ["patient_id", 8], ["LIMIT", 1]]
  â†³ app/controllers/prescriptions_controller.rb:31:in 'PrescriptionsController#create'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 8], ["drug_name", "Prilosec"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 19:22:53.791877"], ["updated_at", "2025-11-30 19:22:53.791877"]]
  â†³ app/controllers/prescriptions_controller.rb:31:in 'PrescriptionsController#create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/prescriptions_controller.rb:31:in 'PrescriptionsController#create'
Redirected to http://localhost:3000/prescriptions
Completed 302 Found in 9ms (ActiveRecord: 1.7ms (3 queries, 0 cached) | GC: 0.0ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:22:53 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 17.4ms | GC: 5.9ms)
  Rendered layout layouts/application.html.erb (Duration: 18.7ms | GC: 5.9ms)
Completed 200 OK in 29ms (Views: 18.8ms | ActiveRecord: 1.2ms (13 queries, 0 cached) | GC: 5.9ms)


Started GET "/documents/API_DOCUMENTATION" for 127.0.0.1 at 2025-11-30 14:23:25 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "API_DOCUMENTATION"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 2.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.7ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:23:35 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 9.2ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 11.6ms | GC: 0.7ms)
Completed 200 OK in 27ms (Views: 11.7ms | ActiveRecord: 2.2ms (13 queries, 0 cached) | GC: 2.3ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:23:38 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 5.7ms | GC: 1.1ms)
  Rendered layout layouts/application.html.erb (Duration: 9.2ms | GC: 1.1ms)
Completed 200 OK in 12ms (Views: 10.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 1.1ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:25:55 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (uninitialized constant DocumentsController::Redcarpet):
  
app/controllers/documents_controller.rb:26:in 'DocumentsController#show'
Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:27:54 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (uninitialized constant DocumentsController::Redcarpet):
  
app/controllers/documents_controller.rb:26:in 'DocumentsController#show'
Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:27:59 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (uninitialized constant DocumentsController::Redcarpet):
  
app/controllers/documents_controller.rb:26:in 'DocumentsController#show'
Started GET "/" for 127.0.0.1 at 2025-11-30 14:28:14 -0500
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (2.3ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (1.9ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 38.5ms | GC: 12.5ms)
  Rendered layout layouts/application.html.erb (Duration: 51.0ms | GC: 12.7ms)
Completed 200 OK in 160ms (Views: 58.0ms | ActiveRecord: 7.2ms (13 queries, 0 cached) | GC: 12.7ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:28:22 -0500
Processing by PrescriptionsController#index as */*
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (1.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 16.3ms | GC: 0.3ms)
  Rendered layout layouts/application.html.erb (Duration: 17.5ms | GC: 0.3ms)
Completed 200 OK in 27ms (Views: 14.8ms | ActiveRecord: 4.0ms (13 queries, 0 cached) | GC: 0.6ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:28:33 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:28:35 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.2ms)
Completed 200 OK in 4ms (Views: 3.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:28:38 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.8ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:28:45 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:29:58 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.6ms | GC: 0.4ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:30:02 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.0ms | GC: 0.4ms)
Completed 200 OK in 15ms (Views: 14.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.4ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:32:01 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.0ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:32:41 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 7.4ms | GC: 0.0ms)
Completed 200 OK in 11ms (Views: 9.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-30 14:32:45 -0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:34:11 -0500
  
ArgumentError (Reported error must be an Exception, got: #<SyntaxError:"/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found\n  \e[2m27 | \e[m    \n  \e[2m28 | \e[m    # Custom renderer to ensure proper code block formatting\n\e[1;31m> \e[m\e[2m29 | \e[m    class CustomHTMLRenderer < Redcarpe ...\n  \e[2m   | \e[m    \e[1;31m^~~~~\e[m unexpected class definition in method body\n  \e[2m30 | \e[m      def block_code(code, language)\n  \e[2m31 | \e[m        lang_class = language ? \" class=\\\"language-\#{language}\\\"\" : \"\"\n">)
Caused by: SyntaxError (/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found
  [2m27 | [m    
  [2m28 | [m    # Custom renderer to ensure proper code block formatting
[1;31m> [m[2m29 | [m    class CustomHTMLRenderer < Redcarpe ...
  [2m   | [m    [1;31m^~~~~[m unexpected class definition in method body
  [2m30 | [m      def block_code(code, language)
  [2m31 | [m        lang_class = language ? " class=\"language-#{language}\"" : ""
)

Information for: ArgumentError (Reported error must be an Exception, got: #<SyntaxError:"/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found\n  \e[2m27 | \e[m    \n  \e[2m28 | \e[m    # Custom renderer to ensure proper code block formatting\n\e[1;31m> \e[m\e[2m29 | \e[m    class CustomHTMLRenderer < Redcarpe ...\n  \e[2m   | \e[m    \e[1;31m^~~~~\e[m unexpected class definition in method body\n  \e[2m30 | \e[m      def block_code(code, language)\n  \e[2m31 | \e[m        lang_class = language ? \" class=\\\"language-\#{language}\\\"\" : \"\"\n">):
  
activesupport (8.1.1) lib/active_support/error_reporter.rb:235:in 'ActiveSupport::ErrorReporter#report'
actionpack (8.1.1) lib/action_dispatch/middleware/executor.rb:36:in 'ActionDispatch::Executor#call'
actionpack (8.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.1.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.1.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.1.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.1.1) lib/action_dispatch/middleware/remote_ip.rb:98:in 'ActionDispatch::RemoteIp#call'
actionpack (8.1.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.4) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.4) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.1.1) lib/action_dispatch/middleware/executor.rb:20:in 'ActionDispatch::Executor#call'
actionpack (8.1.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.4) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.1.1) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.1.1) lib/rails/engine.rb:534:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: SyntaxError (/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found
  [2m27 | [m    
  [2m28 | [m    # Custom renderer to ensure proper code block formatting
[1;31m> [m[2m29 | [m    class CustomHTMLRenderer < Redcarpe ...
  [2m   | [m    [1;31m^~~~~[m unexpected class definition in method body
  [2m30 | [m      def block_code(code, language)
  [2m31 | [m        lang_class = language ? " class=\"language-#{language}\"" : ""
):
  
app/controllers/documents_controller.rb:29: syntax error found
Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:35:33 -0500
  
ArgumentError (Reported error must be an Exception, got: #<SyntaxError:"/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found\n  \e[2m27 | \e[m    \n  \e[2m28 | \e[m    # Custom renderer to ensure proper code block formatting\n\e[1;31m> \e[m\e[2m29 | \e[m    class CustomHTMLRenderer < Redcarpe ...\n  \e[2m   | \e[m    \e[1;31m^~~~~\e[m unexpected class definition in method body\n  \e[2m30 | \e[m      def block_code(code, language)\n  \e[2m31 | \e[m        lang_class = language ? \" class=\\\"language-\#{language}\\\"\" : \"\"\n">)
Caused by: SyntaxError (/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found
  [2m27 | [m    
  [2m28 | [m    # Custom renderer to ensure proper code block formatting
[1;31m> [m[2m29 | [m    class CustomHTMLRenderer < Redcarpe ...
  [2m   | [m    [1;31m^~~~~[m unexpected class definition in method body
  [2m30 | [m      def block_code(code, language)
  [2m31 | [m        lang_class = language ? " class=\"language-#{language}\"" : ""
)

Information for: ArgumentError (Reported error must be an Exception, got: #<SyntaxError:"/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found\n  \e[2m27 | \e[m    \n  \e[2m28 | \e[m    # Custom renderer to ensure proper code block formatting\n\e[1;31m> \e[m\e[2m29 | \e[m    class CustomHTMLRenderer < Redcarpe ...\n  \e[2m   | \e[m    \e[1;31m^~~~~\e[m unexpected class definition in method body\n  \e[2m30 | \e[m      def block_code(code, language)\n  \e[2m31 | \e[m        lang_class = language ? \" class=\\\"language-\#{language}\\\"\" : \"\"\n">):
  
activesupport (8.1.1) lib/active_support/error_reporter.rb:235:in 'ActiveSupport::ErrorReporter#report'
actionpack (8.1.1) lib/action_dispatch/middleware/executor.rb:36:in 'ActionDispatch::Executor#call'
actionpack (8.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.1.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.1.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.1.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.1.1) lib/action_dispatch/middleware/remote_ip.rb:98:in 'ActionDispatch::RemoteIp#call'
actionpack (8.1.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.4) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.4) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.1.1) lib/action_dispatch/middleware/executor.rb:20:in 'ActionDispatch::Executor#call'
actionpack (8.1.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.4) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.1.1) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.1.1) lib/rails/engine.rb:534:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: SyntaxError (/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found
  [2m27 | [m    
  [2m28 | [m    # Custom renderer to ensure proper code block formatting
[1;31m> [m[2m29 | [m    class CustomHTMLRenderer < Redcarpe ...
  [2m   | [m    [1;31m^~~~~[m unexpected class definition in method body
  [2m30 | [m      def block_code(code, language)
  [2m31 | [m        lang_class = language ? " class=\"language-#{language}\"" : ""
):
  
app/controllers/documents_controller.rb:29: syntax error found
Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:35:35 -0500
  
ArgumentError (Reported error must be an Exception, got: #<SyntaxError:"/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found\n  \e[2m27 | \e[m    \n  \e[2m28 | \e[m    # Custom renderer to ensure proper code block formatting\n\e[1;31m> \e[m\e[2m29 | \e[m    class CustomHTMLRenderer < Redcarpe ...\n  \e[2m   | \e[m    \e[1;31m^~~~~\e[m unexpected class definition in method body\n  \e[2m30 | \e[m      def block_code(code, language)\n  \e[2m31 | \e[m        lang_class = language ? \" class=\\\"language-\#{language}\\\"\" : \"\"\n">)
Caused by: SyntaxError (/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found
  [2m27 | [m    
  [2m28 | [m    # Custom renderer to ensure proper code block formatting
[1;31m> [m[2m29 | [m    class CustomHTMLRenderer < Redcarpe ...
  [2m   | [m    [1;31m^~~~~[m unexpected class definition in method body
  [2m30 | [m      def block_code(code, language)
  [2m31 | [m        lang_class = language ? " class=\"language-#{language}\"" : ""
)

Information for: ArgumentError (Reported error must be an Exception, got: #<SyntaxError:"/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found\n  \e[2m27 | \e[m    \n  \e[2m28 | \e[m    # Custom renderer to ensure proper code block formatting\n\e[1;31m> \e[m\e[2m29 | \e[m    class CustomHTMLRenderer < Redcarpe ...\n  \e[2m   | \e[m    \e[1;31m^~~~~\e[m unexpected class definition in method body\n  \e[2m30 | \e[m      def block_code(code, language)\n  \e[2m31 | \e[m        lang_class = language ? \" class=\\\"language-\#{language}\\\"\" : \"\"\n">):
  
activesupport (8.1.1) lib/active_support/error_reporter.rb:235:in 'ActiveSupport::ErrorReporter#report'
actionpack (8.1.1) lib/action_dispatch/middleware/executor.rb:36:in 'ActionDispatch::Executor#call'
actionpack (8.1.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in 'ActionDispatch::ActionableExceptions#call'
actionpack (8.1.1) lib/action_dispatch/middleware/debug_exceptions.rb:31:in 'ActionDispatch::DebugExceptions#call'
actionpack (8.1.1) lib/action_dispatch/middleware/show_exceptions.rb:32:in 'ActionDispatch::ShowExceptions#call'
railties (8.1.1) lib/rails/rack/logger.rb:41:in 'Rails::Rack::Logger#call_app'
railties (8.1.1) lib/rails/rack/logger.rb:29:in 'Rails::Rack::Logger#call'
actionpack (8.1.1) lib/action_dispatch/middleware/remote_ip.rb:98:in 'ActionDispatch::RemoteIp#call'
actionpack (8.1.1) lib/action_dispatch/middleware/request_id.rb:34:in 'ActionDispatch::RequestId#call'
rack (3.2.4) lib/rack/method_override.rb:28:in 'Rack::MethodOverride#call'
rack (3.2.4) lib/rack/runtime.rb:24:in 'Rack::Runtime#call'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:61:in 'block in ActionDispatch::ServerTiming#call'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:26:in 'ActionDispatch::ServerTiming::Subscriber#collect_events'
actionpack (8.1.1) lib/action_dispatch/middleware/server_timing.rb:60:in 'ActionDispatch::ServerTiming#call'
actionpack (8.1.1) lib/action_dispatch/middleware/executor.rb:20:in 'ActionDispatch::Executor#call'
actionpack (8.1.1) lib/action_dispatch/middleware/static.rb:27:in 'ActionDispatch::Static#call'
rack (3.2.4) lib/rack/sendfile.rb:131:in 'Rack::Sendfile#call'
actionpack (8.1.1) lib/action_dispatch/middleware/host_authorization.rb:143:in 'ActionDispatch::HostAuthorization#call'
railties (8.1.1) lib/rails/engine.rb:534:in 'Rails::Engine#call'
puma (6.6.1) lib/puma/configuration.rb:279:in 'Puma::Configuration::ConfigMiddleware#call'
puma (6.6.1) lib/puma/request.rb:99:in 'block in Puma::Request#handle_request'
puma (6.6.1) lib/puma/thread_pool.rb:390:in 'Puma::ThreadPool#with_force_shutdown'
puma (6.6.1) lib/puma/request.rb:98:in 'Puma::Request#handle_request'
puma (6.6.1) lib/puma/server.rb:472:in 'Puma::Server#process_client'
puma (6.6.1) lib/puma/server.rb:254:in 'block in Puma::Server#run'
puma (6.6.1) lib/puma/thread_pool.rb:167:in 'block in Puma::ThreadPool#spawn_thread'

Information for cause: SyntaxError (/home/allen/src/gifthealth/app/controllers/documents_controller.rb:29: syntax error found
  [2m27 | [m    
  [2m28 | [m    # Custom renderer to ensure proper code block formatting
[1;31m> [m[2m29 | [m    class CustomHTMLRenderer < Redcarpe ...
  [2m   | [m    [1;31m^~~~~[m unexpected class definition in method body
  [2m30 | [m      def block_code(code, language)
  [2m31 | [m        lang_class = language ? " class=\"language-#{language}\"" : ""
):
  
app/controllers/documents_controller.rb:29: syntax error found
Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:36:11 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 9.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.0ms | GC: 0.0ms)
Completed 200 OK in 18ms (Views: 16.6ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:37:37 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 1.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | GC: 0.0ms)
Completed 200 OK in 27ms (Views: 24.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:38:50 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DocumentsController#show as */*
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 1.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 12.9ms | GC: 0.0ms)
Completed 200 OK in 24ms (Views: 21.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:38:55 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.9ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 23.9ms | GC: 0.8ms)
  Rendered layout layouts/application.html.erb (Duration: 35.7ms | GC: 0.8ms)
Completed 200 OK in 175ms (Views: 35.9ms | ActiveRecord: 3.4ms (13 queries, 0 cached) | GC: 41.8ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:39:01 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.4ms | GC: 0.2ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:40:24 -0500
Processing by DocumentsController#show as */*
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.7ms | GC: 0.2ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.2ms)
Completed 200 OK in 15ms (Views: 13.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.2ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:40:30 -0500
Processing by DocumentsController#show as */*
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.1ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | GC: 0.0ms)
Completed 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:41:06 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.2ms | GC: 0.0ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/TECHNOLOGY_CHOICES.md" for 127.0.0.1 at 2025-11-30 14:42:04 -0500
Processing by DocumentsController#show as MD
  Parameters: {"name" => "TECHNOLOGY_CHOICES"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActionView::MissingTemplate (Missing template documents/show, application/show with {locale: [:en], formats: [:md], variants: [], handlers: [:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/allen/src/gifthealth/app/views"
):
  
app/controllers/documents_controller.rb:52:in 'DocumentsController#show'
Started GET "/documents/TECHNOLOGY_CHOICES" for 127.0.0.1 at 2025-11-30 14:43:38 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "TECHNOLOGY_CHOICES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:44:16 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (4.7ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.5ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (2.9ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 40.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 48.9ms | GC: 0.0ms)
Completed 200 OK in 155ms (Views: 46.5ms | ActiveRecord: 11.9ms (13 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:44:20 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.0ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 3.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 14:45:30 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 6.8ms | GC: 0.0ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/TECHNOLOGY_CHOICES" for 127.0.0.1 at 2025-11-30 14:45:38 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "TECHNOLOGY_CHOICES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.2ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.5ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:50:09 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (5.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.4ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 25.5ms | GC: 0.5ms)
  Rendered layout layouts/application.html.erb (Duration: 35.6ms | GC: 0.7ms)
Completed 200 OK in 96ms (Views: 43.7ms | ActiveRecord: 10.0ms (13 queries, 0 cached) | GC: 1.4ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:52:22 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (1.6ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 24.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 28.7ms | GC: 0.0ms)
Completed 200 OK in 95ms (Views: 32.2ms | ActiveRecord: 8.3ms (13 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 14:52:25 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
  Rendering text template
  Rendered text template (Duration: 0.0ms | GC: 0.0ms)
Completed 404 Not Found in 3ms (Views: 3.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 14:53:23 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
  Rendering text template
  Rendered text template (Duration: 0.0ms | GC: 0.0ms)
Completed 404 Not Found in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 14:53:39 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (0.7ms)
Completed 200 OK in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 14:53:47 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (0.2ms)
Completed 200 OK in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:54:40 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (2.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.5ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 10.7ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 17.9ms | GC: 0.0ms)
Completed 200 OK in 50ms (Views: 20.8ms | ActiveRecord: 4.3ms (13 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 14:56:10 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (0.2ms)
Completed 200 OK in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 14:56:22 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (0.2ms)
Completed 200 OK in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 14:56:30 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (6.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (3.8ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (1.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 72.6ms | GC: 30.0ms)
  Rendered layout layouts/application.html.erb (Duration: 90.5ms | GC: 31.3ms)
Completed 200 OK in 251ms (Views: 92.6ms | ActiveRecord: 14.9ms (13 queries, 0 cached) | GC: 99.9ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2025-11-30 14:56:36 -0500
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/documents/erd" for 127.0.0.1 at 2025-11-30 14:56:38 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "erd"}
  Rendering layout layouts/application.html.erb
  Rendering documents/erd.html.erb within layouts/application
  Rendered documents/erd.html.erb within layouts/application (Duration: 1.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.6ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 6.0ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:57:05 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.4ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:70
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 27.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 36.3ms | GC: 0.0ms)
Completed 200 OK in 74ms (Views: 46.2ms | ActiveRecord: 2.9ms (13 queries, 0 cached) | GC: 0.0ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 14:58:47 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.9ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.5ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:76
  [1m[36mPrescription Load (0.9ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:76
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:76
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:76
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 25.6ms | GC: 0.6ms)
  Rendered layout layouts/application.html.erb (Duration: 35.7ms | GC: 0.6ms)
Completed 200 OK in 99ms (Views: 37.0ms | ActiveRecord: 4.7ms (13 queries, 0 cached) | GC: 15.6ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 15:00:26 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (1.9ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?, ?, ?, ?)[0m  [["patient_id", 2], ["patient_id", 3], ["patient_id", 4], ["patient_id", 5], ["patient_id", 6], ["patient_id", 7], ["patient_id", 8]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 2], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 3], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 4], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 5], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 6], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 7], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 8], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 4], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:78
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 7], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:78
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 6], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:78
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 8], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:78
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 10.5ms | GC: 0.1ms)
  Rendered layout layouts/application.html.erb (Duration: 17.7ms | GC: 0.1ms)
Completed 200 OK in 52ms (Views: 19.9ms | ActiveRecord: 3.7ms (13 queries, 0 cached) | GC: 0.5ms)


Started DELETE "/patients/reset_all" for 127.0.0.1 at 2025-11-30 15:00:35 -0500
Processing by PatientsController#reset_all as HTML
  Parameters: {"authenticity_token" => "l71yjI1R0-tgUEsO8SXyh8TPOd4OSY6SXdM-1XPmT7mYUC3HIBFM1nOKQYg4A3B3W6MePjp--fzpEbVffQRRug"}
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (0.8ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 2]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.4ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 2]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.4ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 2]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (6.4ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (1.6ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 3]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 4]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 3]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (11.5ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (4.4ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 4]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 5]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 6]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 4]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (1.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 5]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 8]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 5]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (0.9ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 6]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 9]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 6]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (0.7ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 7]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.0ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 10]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.0ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 11]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.0ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 7]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (2.9ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 8]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 12]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.0ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 13]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 8]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
Redirected to http://localhost:3000/prescriptions
Completed 302 Found in 82ms (ActiveRecord: 37.4ms (25 queries, 0 cached) | GC: 1.5ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 15:00:35 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.2ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 2.6ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/prescriptions/upload" for 127.0.0.1 at 2025-11-30 15:00:47 -0500
Processing by PrescriptionsController#upload as HTML
  Parameters: {"authenticity_token" => "PTnUAnvo6FtPtu2OtHdos1Phf8okpRG8xypcxBK0LweQYLfX2TIsv1Vm1dlrtPbqZdIng_beBEpNLnEZ99C86w", "file" => #<ActionDispatch::Http::UploadedFile:0x000079ad27769ed8 @tempfile=#<Tempfile:/tmp/RackMultipart20251130-91472-p4p0sg.csv>, @content_type="text/csv", @original_filename="sample_upload.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sample_upload.csv\"\r\nContent-Type: text/csv\r\n">, "commit" => "Process File"}
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["created_at", "2025-11-30 20:00:47.279059"], ["updated_at", "2025-11-30 20:00:47.279059"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 9], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "A"], ["patient_id", 9], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 9], ["drug_name", "A"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:00:47.294061"], ["updated_at", "2025-11-30 20:00:47.294061"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:00:47.297813"], ["id", 14]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 9], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 14]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.1ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Mark"], ["created_at", "2025-11-30 20:00:47.305287"], ["updated_at", "2025-11-30 20:00:47.305287"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 10], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "B"], ["patient_id", 10], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 10], ["drug_name", "B"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:00:47.310072"], ["updated_at", "2025-11-30 20:00:47.310072"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.9ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:00:47.312459"], ["id", 15]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 10], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 15]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 10], ["drug_name", "C"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "C"], ["patient_id", 10], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 10], ["drug_name", "C"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:00:47.324264"], ["updated_at", "2025-11-30 20:00:47.324264"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 10], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 15]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 9], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "E"], ["patient_id", 9], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 9], ["drug_name", "E"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:00:47.332531"], ["updated_at", "2025-11-30 20:00:47.332531"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (1.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:00:47.335244"], ["id", 17]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 10], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 15]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 10], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.5ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 15]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Paul"], ["created_at", "2025-11-30 20:00:47.356338"], ["updated_at", "2025-11-30 20:00:47.356338"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 11], ["drug_name", "D"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "D"], ["patient_id", 11], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 11], ["drug_name", "D"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:00:47.363536"], ["updated_at", "2025-11-30 20:00:47.363536"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 9], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.3ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 17]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 9], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 17]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Nick"], ["created_at", "2025-11-30 20:00:47.391498"], ["updated_at", "2025-11-30 20:00:47.391498"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 12], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "A"], ["patient_id", 12], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 12], ["drug_name", "A"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:00:47.409918"], ["updated_at", "2025-11-30 20:00:47.409918"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (2.5ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:00:47.414767"], ["id", 19]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
Redirected to http://localhost:3000/
Completed 302 Found in 309ms (ActiveRecord: 32.0ms (57 queries, 0 cached) | GC: 19.2ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 15:00:47 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?)[0m  [["patient_id", 9], ["patient_id", 10], ["patient_id", 11], ["patient_id", 12]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 9], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 10], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 11], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 12], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 10], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:78
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 9], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:78
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 12], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:78
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 7.9ms | GC: 1.0ms)
  Rendered layout layouts/application.html.erb (Duration: 9.2ms | GC: 1.0ms)
Completed 200 OK in 15ms (Views: 9.3ms | ActiveRecord: 0.8ms (9 queries, 0 cached) | GC: 1.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 15:02:47 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (3.7ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?)[0m  [["patient_id", 9], ["patient_id", 10], ["patient_id", 11], ["patient_id", 12]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 9], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 10], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 11], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 12], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 10], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 9], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 12], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 24.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 31.6ms | GC: 0.1ms)
Completed 200 OK in 74ms (Views: 33.0ms | ActiveRecord: 8.4ms (9 queries, 0 cached) | GC: 0.5ms)


Started DELETE "/patients/reset_all" for 127.0.0.1 at 2025-11-30 15:02:51 -0500
Processing by PatientsController#reset_all as HTML
  Parameters: {"authenticity_token" => "ScNyjDRvSalSqJscFgKqmZopfD7KIuBftXZIGjRXtEFGLi3HmS_WlEFykZrfJChpBUVb3v4VlzEBtMOQOrWqQg"}
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (2.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 9]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.2ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 14]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 17]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 9]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (18.7ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (0.9ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 10]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 15]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.0ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 16]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 10]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (7.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (7.9ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 11]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 18]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 11]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (0.6ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 12]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.0ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 19]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.5ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 12]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
Redirected to http://localhost:3000/prescriptions
Completed 302 Found in 74ms (ActiveRecord: 40.0ms (15 queries, 0 cached) | GC: 0.8ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 15:02:52 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.3ms | GC: 0.0ms)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/prescriptions/upload" for 127.0.0.1 at 2025-11-30 15:02:58 -0500
Processing by PrescriptionsController#upload as HTML
  Parameters: {"authenticity_token" => "waDAzAA_P8HiHgn2Ol7lHnHcZ_u0SeBZg9D3lj_cgK5s-aMZouX7JfjOMaHlnXtHR-8_smYy9a8J1NpL2rgTQg", "file" => #<ActionDispatch::Http::UploadedFile:0x000079ad3e3e9f80 @tempfile=#<Tempfile:/tmp/RackMultipart20251130-91472-6wzk6h.csv>, @content_type="text/csv", @original_filename="sample_upload.csv", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sample_upload.csv\"\r\nContent-Type: text/csv\r\n">, "commit" => "Process File"}
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (10.7ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.1ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["created_at", "2025-11-30 20:02:58.488235"], ["updated_at", "2025-11-30 20:02:58.488235"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 13], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "A"], ["patient_id", 13], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.3ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 13], ["drug_name", "A"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:02:58.493957"], ["updated_at", "2025-11-30 20:02:58.493957"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.0ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:02:58.506428"], ["id", 20]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (10.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 13], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 20]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.1ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Mark"], ["created_at", "2025-11-30 20:02:58.524207"], ["updated_at", "2025-11-30 20:02:58.524207"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 14], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "B"], ["patient_id", 14], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 14], ["drug_name", "B"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:02:58.556180"], ["updated_at", "2025-11-30 20:02:58.556180"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.6ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:02:58.558128"], ["id", 21]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 14], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 21]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 14], ["drug_name", "C"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "C"], ["patient_id", 14], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 14], ["drug_name", "C"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:02:58.576344"], ["updated_at", "2025-11-30 20:02:58.576344"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (11.4ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 14], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 21]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 13], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "E"], ["patient_id", 13], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 13], ["drug_name", "E"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:02:58.607611"], ["updated_at", "2025-11-30 20:02:58.607611"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (1.0ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:02:58.610363"], ["id", 23]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 14], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 21]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 14], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.4ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 21]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.3ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (2.6ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Paul"], ["created_at", "2025-11-30 20:02:58.638204"], ["updated_at", "2025-11-30 20:02:58.638204"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 15], ["drug_name", "D"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "D"], ["patient_id", 15], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 15], ["drug_name", "D"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:02:58.646491"], ["updated_at", "2025-11-30 20:02:58.646491"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 13], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.3ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 23]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 13], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 23]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.1ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Nick"], ["created_at", "2025-11-30 20:02:58.663822"], ["updated_at", "2025-11-30 20:02:58.663822"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 16], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "A"], ["patient_id", 16], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.1ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 16], ["drug_name", "A"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:02:58.668638"], ["updated_at", "2025-11-30 20:02:58.668638"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (2.4ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:02:58.670554"], ["id", 25]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
Redirected to http://localhost:3000/
Completed 302 Found in 204ms (ActiveRecord: 54.8ms (57 queries, 0 cached) | GC: 31.7ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 15:02:58 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?)[0m  [["patient_id", 13], ["patient_id", 14], ["patient_id", 15], ["patient_id", 16]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 13], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 14], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 15], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 16], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 14], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 13], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 16], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 8.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.4ms | GC: 1.6ms)
Completed 200 OK in 33ms (Views: 13.8ms | ActiveRecord: 1.4ms (9 queries, 0 cached) | GC: 8.2ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 15:03:27 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 13.9ms | GC: 0.8ms)
Completed 200 OK in 18ms (Views: 16.3ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.8ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 15:03:27 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (0.3ms)
Completed 200 OK in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/REQUIREMENTS" for 127.0.0.1 at 2025-11-30 15:03:34 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "REQUIREMENTS"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.3ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.5ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 5.7ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 15:07:47 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (2.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.4ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?)[0m  [["patient_id", 13], ["patient_id", 14], ["patient_id", 15], ["patient_id", 16]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 13], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 14], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 15], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (5.6ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 16], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 14], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 13], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 16], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 20.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 23.8ms | GC: 0.1ms)
Completed 200 OK in 75ms (Views: 26.9ms | ActiveRecord: 10.3ms (9 queries, 0 cached) | GC: 0.6ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 15:07:50 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?)[0m  [["patient_id", 13], ["patient_id", 14], ["patient_id", 15], ["patient_id", 16]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 13], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 14], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 15], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 16], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 14], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 13], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 16], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 17.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 20.5ms | GC: 0.0ms)
Completed 200 OK in 39ms (Views: 20.8ms | ActiveRecord: 1.6ms (9 queries, 0 cached) | GC: 0.0ms)


Started DELETE "/patients/reset_all" for 127.0.0.1 at 2025-11-30 15:07:55 -0500
Processing by PatientsController#reset_all as HTML
  Parameters: {"authenticity_token" => "SALbVmgzdIly6-Vfc2YXjW4TfeUUn39fvnHElTtJWTJH74QdxXPrtGEx79m6QJV98X9aBSCoCDEKs08fNatHMQ"}
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (1.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 13]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 20]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.2ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 23]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 13]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (2.0ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 14]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 21]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 22]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.2ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 14]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (1.4ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 15]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (9.5ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 24]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 15]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Load (0.7ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ?[0m  [["patient_id", 16]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPrescription Destroy (0.1ms)[0m  [1m[31mDELETE FROM "prescriptions" WHERE "prescriptions"."id" = ?[0m  [["id", 25]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mPatient Destroy (0.1ms)[0m  [1m[31mDELETE FROM "patients" WHERE "patients"."id" = ?[0m  [["id", 16]]
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/controllers/patients_controller.rb:21:in 'PatientsController#reset_all'
Redirected to http://localhost:3000/prescriptions
Completed 302 Found in 82ms (ActiveRecord: 21.5ms (15 queries, 0 cached) | GC: 0.1ms)


Started GET "/prescriptions" for 127.0.0.1 at 2025-11-30 15:07:55 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 0.9ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 4.4ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 5.1ms | ActiveRecord: 0.1ms (1 query, 0 cached) | GC: 0.2ms)


Started POST "/prescriptions/upload" for 127.0.0.1 at 2025-11-30 15:08:03 -0500
Processing by PrescriptionsController#upload as HTML
  Parameters: {"authenticity_token" => "6N3QLgsVa2p2Ah7ELzJUZeSCzWGyzBPuXeIwPrmO1EhFhLP7qc-vjmzSJpPw8co80rGVKGC3BhjX5h3jXOpHpA", "file" => #<ActionDispatch::Http::UploadedFile:0x000079ad3e4059b0 @tempfile=#<Tempfile:/tmp/RackMultipart20251130-91472-bpeuu5.txt>, @content_type="text/plain", @original_filename="sample_input.txt", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sample_input.txt\"\r\nContent-Type: text/plain\r\n">, "commit" => "Process File"}
  [1m[36mPatient Load (0.3ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (12.9ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Nick"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.5ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Nick"], ["created_at", "2025-11-30 20:08:03.246631"], ["updated_at", "2025-11-30 20:08:03.246631"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 17], ["drug_name", "A"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "A"], ["patient_id", 17], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 17], ["drug_name", "A"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:08:03.267744"], ["updated_at", "2025-11-30 20:08:03.267744"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:08:03.297442"], ["id", 26]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.4ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Mark"], ["created_at", "2025-11-30 20:08:03.320876"], ["updated_at", "2025-11-30 20:08:03.320876"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 18], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "B"], ["patient_id", 18], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 18], ["drug_name", "B"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:08:03.335681"], ["updated_at", "2025-11-30 20:08:03.335681"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (1.8ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:08:03.351248"], ["id", 27]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 18], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 27]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 18], ["drug_name", "C"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "C"], ["patient_id", 18], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.3ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 18], ["drug_name", "C"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:08:03.378642"], ["updated_at", "2025-11-30 20:08:03.378642"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (3.3ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 18], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.3ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 27]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.4ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "John"], ["created_at", "2025-11-30 20:08:03.412711"], ["updated_at", "2025-11-30 20:08:03.412711"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 19], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "E"], ["patient_id", 19], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.2ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 19], ["drug_name", "E"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:08:03.420832"], ["updated_at", "2025-11-30 20:08:03.420832"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPrescription Update (2.3ms)[0m  [1m[33mUPDATE "prescriptions" SET "created" = ?, "updated_at" = ? WHERE "prescriptions"."id" = ?[0m  [["created", 1], ["updated_at", "2025-11-30 20:08:03.422902"], ["id", 29]]
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/prescription.rb:29:in 'Prescription#mark_created'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 18], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 27]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Mark"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 18], ["drug_name", "B"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.1ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 27]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "Paul"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPatient Create (0.2ms)[0m  [1m[32mINSERT INTO "patients" ("name", "created_at", "updated_at") VALUES (?, ?, ?) RETURNING "id"[0m  [["name", "Paul"], ["created_at", "2025-11-30 20:08:03.435568"], ["updated_at", "2025-11-30 20:08:03.435568"]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 20], ["drug_name", "D"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mBEGIN immediate TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."drug_name" = ? AND "prescriptions"."patient_id" = ? LIMIT ?[0m  [["drug_name", "D"], ["patient_id", 20], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Create (0.3ms)[0m  [1m[32mINSERT INTO "prescriptions" ("patient_id", "drug_name", "created", "fill_count", "return_count", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["patient_id", 20], ["drug_name", "D"], ["created", 0], ["fill_count", 0], ["return_count", 0], ["created_at", "2025-11-30 20:08:03.442324"], ["updated_at", "2025-11-30 20:08:03.442324"]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mCOMMIT TRANSACTION[0m
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 19], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (1.3ms)[0m  [1m[33mUPDATE "prescriptions" SET "fill_count" = COALESCE("prescriptions"."fill_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["fill_count", 1], ["id", 29]]
  â†³ app/models/prescription.rb:43:in 'Prescription#fill'
  [1m[36mPatient Load (0.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients" WHERE "patients"."name" = ? LIMIT ?[0m  [["name", "John"], ["LIMIT", 1]]
  â†³ app/services/prescription_event_processor.rb:18:in 'PrescriptionEventProcessor#process_event'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."drug_name" = ? LIMIT ?[0m  [["patient_id", 19], ["drug_name", "E"], ["LIMIT", 1]]
  â†³ app/models/patient.rb:21:in 'Patient#get_or_create_prescription'
  [1m[36mPrescription Update All (0.2ms)[0m  [1m[33mUPDATE "prescriptions" SET "return_count" = COALESCE("prescriptions"."return_count", 0) + ? WHERE "prescriptions"."id" = ?[0m  [["return_count", 1], ["id", 29]]
  â†³ app/models/prescription.rb:62:in 'Prescription#return_fill'
Redirected to http://localhost:3000/
Completed 302 Found in 243ms (ActiveRecord: 55.7ms (49 queries, 0 cached) | GC: 25.4ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 15:08:03 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (0.1ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?)[0m  [["patient_id", 17], ["patient_id", 18], ["patient_id", 19], ["patient_id", 20]]
  â†³ app/controllers/prescriptions_controller.rb:8:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 17], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 18], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 19], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 20], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 18], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 19], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 17], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 9.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 10.2ms | GC: 0.0ms)
Completed 200 OK in 17ms (Views: 10.4ms | ActiveRecord: 0.8ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 15:08:12 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.5ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.1ms | GC: 0.0ms)
Completed 200 OK in 4ms (Views: 3.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 15:08:13 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (0.1ms)
Completed 200 OK in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/REQUIREMENTS" for 127.0.0.1 at 2025-11-30 15:08:17 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "REQUIREMENTS"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 5.2ms | GC: 0.0ms)
Completed 200 OK in 7ms (Views: 6.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 16:18:18 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (2.2ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:9:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.5ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?)[0m  [["patient_id", 17], ["patient_id", 18], ["patient_id", 19], ["patient_id", 20]]
  â†³ app/controllers/prescriptions_controller.rb:9:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 17], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 18], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 19], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 20], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 18], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 19], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 17], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 59.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 64.9ms | GC: 0.0ms)
Completed 200 OK in 181ms (Views: 67.5ms | ActiveRecord: 3.8ms (9 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 16:18:26 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 16.6ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 26.5ms | GC: 0.0ms)
Completed 200 OK in 35ms (Views: 30.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 16:18:26 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (1.4ms)
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 16:24:58 -0500
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DocumentsController#show as */*
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 1.0ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 14.1ms | GC: 0.0ms)
Completed 200 OK in 33ms (Views: 30.9ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/" for 127.0.0.1 at 2025-11-30 16:25:09 -0500
Processing by PrescriptionsController#index as HTML
  [1m[36mPatient Load (1.0ms)[0m  [1m[34mSELECT "patients".* FROM "patients"[0m
  â†³ app/controllers/prescriptions_controller.rb:9:in 'PrescriptionsController#index'
  [1m[36mPrescription Load (0.3ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" IN (?, ?, ?, ?)[0m  [["patient_id", 17], ["patient_id", 18], ["patient_id", 19], ["patient_id", 20]]
  â†³ app/controllers/prescriptions_controller.rb:9:in 'PrescriptionsController#index'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 17], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 18], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 19], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  [1m[36mPrescription Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ? LIMIT ?[0m  [["patient_id", 20], ["created", 1], ["LIMIT", 1]]
  â†³ app/models/patient.rb:55:in 'Patient#has_created_prescriptions?'
  Rendering layout layouts/application.html.erb
  Rendering prescriptions/index.html.erb within layouts/application
  [1m[36mPrescription Load (0.2ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 18], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 19], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  [1m[36mPrescription Load (0.1ms)[0m  [1m[34mSELECT "prescriptions".* FROM "prescriptions" WHERE "prescriptions"."patient_id" = ? AND "prescriptions"."created" = ?[0m  [["patient_id", 17], ["created", 1]]
  â†³ app/views/prescriptions/index.html.erb:77
  Rendered prescriptions/index.html.erb within layouts/application (Duration: 14.6ms | GC: 0.7ms)
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | GC: 0.7ms)
Completed 200 OK in 122ms (Views: 16.8ms | ActiveRecord: 3.9ms (9 queries, 0 cached) | GC: 17.3ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 16:25:14 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.4ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 3.4ms | GC: 0.0ms)
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 16:25:14 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (0.5ms)
Completed 200 OK in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started GET "/documents/RAILS_BRANCH_CHANGES" for 127.0.0.1 at 2025-11-30 16:25:43 -0500
Processing by DocumentsController#show as HTML
  Parameters: {"name" => "RAILS_BRANCH_CHANGES"}
  Rendering layout layouts/application.html.erb
  Rendering documents/show.html.erb within layouts/application
  Rendered documents/show.html.erb within layouts/application (Duration: 0.8ms | GC: 0.0ms)
  Rendered layout layouts/application.html.erb (Duration: 2.9ms | GC: 0.3ms)
Completed 200 OK in 5ms (Views: 4.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.3ms)


Started GET "/documents/erd-diagram.svg" for 127.0.0.1 at 2025-11-30 16:25:43 -0500
Processing by DocumentsController#show as SVG
  Parameters: {"name" => "erd-diagram"}
Sent file /home/allen/src/gifthealth/documents/erd-diagram.svg (0.1ms)
Completed 200 OK in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


